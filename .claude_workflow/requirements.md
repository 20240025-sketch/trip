# 要件定義書：旅の計画管理システム

## 1. プロジェクト概要

### 1.1 目的
旅行やイベントの計画を簡単に作成・管理・共有できるWebアプリケーションを開発する。
「旅しお」(https://tabisio.com/)を参考に、直感的で使いやすいインターフェースを提供する。

### 1.2 対象ユーザー
- 旅行を計画する個人・グループ
- イベントや遠征の計画を立てる団体
- 出張計画を管理するビジネスパーソン

### 1.3 利用技術スタック
- **バックエンド**: Laravel 11.x
- **フロントエンド**: Vue.js 3.x
- **CSSフレームワーク**: Tailwind CSS
- **データベース**: SQLite
- **PDF出力**: barryvdh/laravel-dompdf
- **画像処理**: intervention/image

## 2. 機能要件

### 2.1 コア機能

#### 2.1.1 計画（しおり）管理
- **計画の作成**
  - タイトル、説明、日程（開始日〜終了日）の設定
  - カバー画像のアップロード
  - 公開/非公開の設定
  
- **計画の編集**
  - すべての項目の編集可能
  - リアルタイムプレビュー
  
- **計画の削除**
  - 削除確認ダイアログの表示
  - 関連データの完全削除

- **計画の一覧表示**
  - カード形式での表示
  - 日付順でのソート
  - 検索機能（タイトル・説明）
  - ページネーション

#### 2.1.2 日程・スケジュール管理
- **日別スケジュール**
  - 複数日にわたる日程の管理
  - 日ごとのタイムライン表示
  
- **スケジュールアイテム**
  - 時刻、タイトル、説明、場所の登録
  - 画像の添付（複数枚可能）
  - 並び順の変更（ドラッグ&ドロップ）
  - メモ・注意事項の記載
  
- **交通手段情報**
  - 移動方法（電車、バス、飛行機、車など）
  - 出発地・到着地
  - 時刻、所要時間
  - 費用

#### 2.1.3 画像管理
- **画像アップロード**
  - JPEG、PNG形式対応
  - 最大ファイルサイズ: 5MB
  - 複数枚同時アップロード
  
- **画像表示**
  - サムネイル生成（自動リサイズ）
  - モーダルでの拡大表示
  - 画像ギャラリー形式
  
- **画像編集**
  - 削除機能
  - キャプション追加

#### 2.1.4 参加者管理
- **参加者登録**
  - 名前、連絡先（任意）
  - アバター画像（任意）
  
- **参加者一覧**
  - カード形式での表示
  - 簡単な追加・削除

#### 2.1.5 持ち物リスト
- **持ち物管理**
  - アイテム名の登録
  - カテゴリ分類（衣類、電子機器、書類など）
  - チェックボックスでの確認機能
  
- **共同編集**
  - 参加者全員が追加・編集可能

#### 2.1.6 メモ・注意事項
- **フリーテキストエリア**
  - Markdown形式での記述
  - 緊急連絡先、重要事項の記載

### 2.2 出力機能

#### 2.2.1 PDF出力
- **出力内容**
  - 計画の全情報（タイトル、日程、スケジュール）
  - 画像（適切なサイズに調整）
  - 参加者リスト
  - 持ち物リスト
  - メモ・注意事項
  
- **レイアウト**
  - A4縦向き、横向きの選択
  - 見やすいフォーマット
  - ページ番号、ヘッダー/フッター
  
- **ダウンロード**
  - ブラウザから直接ダウンロード
  - ファイル名: {計画タイトル}_{日付}.pdf

#### 2.2.2 共有機能
- **URL共有**
  - 一意のURLの生成
  - 公開設定の計画のみアクセス可能
  
- **プレビュー表示**
  - 印刷プレビュー機能
  - 印刷時の最適化CSS

### 2.3 UI/UX要件

#### 2.3.1 デザイン方針
- **シンプル・直感的**
  - 初めてでも迷わない操作性
  - 必要最小限のクリック数
  
- **レスポンシブデザイン**
  - スマートフォン対応
  - タブレット対応
  - デスクトップ最適化
  
- **カラースキーム**
  - 明るく爽やかな配色
  - 旅行・計画をイメージさせるデザイン
  - Tailwind CSSのユーティリティクラスを活用

#### 2.3.2 主要画面
1. **ホーム画面**
   - ヒーローセクション（キャッチコピー、CTA）
   - 機能紹介セクション
   - サンプル表示

2. **計画一覧画面**
   - カード形式の一覧
   - 検索バー
   - 新規作成ボタン

3. **計画作成・編集画面**
   - 左側: 入力フォーム
   - 右側: リアルタイムプレビュー（デスクトップ）
   - タブ切り替え（モバイル）

4. **計画詳細画面**
   - タイムライン表示
   - 日付別タブ切り替え
   - 画像ギャラリー
   - PDF出力ボタン

5. **計画公開画面**
   - シンプルで印刷に適したレイアウト
   - ナビゲーション非表示

## 3. 非機能要件

### 3.1 パフォーマンス
- ページ読み込み時間: 3秒以内
- 画像最適化による高速表示
- LazyLoadingの実装

### 3.2 セキュリティ
- XSS対策（入力値のエスケープ）
- CSRF保護（Laravel標準機能）
- 画像アップロードのバリデーション
- SQLインジェクション対策

### 3.3 可用性
- エラーハンドリング
- ユーザーフレンドリーなエラーメッセージ
- フォーム入力のバリデーション

### 3.4 保守性
- コードの可読性
- PSR準拠
- コメントの適切な記載
- テストの実装（基本的なもの）

## 4. データベース設計方針

### 4.1 テーブル構成（概要）
1. **plans（計画）**
   - 計画の基本情報
   
2. **days（日程）**
   - 各日の情報
   
3. **schedule_items（スケジュールアイテム）**
   - 各予定の詳細
   
4. **participants（参加者）**
   - 参加者情報
   
5. **checklist_items（持ち物リスト）**
   - 持ち物アイテム
   
6. **images（画像）**
   - アップロード画像の管理

## 5. 制約事項

### 5.1 対象外機能
- ユーザー認証・ログイン機能（将来実装予定）
- リアルタイム共同編集（WebSocket不使用）
- 外部API連携（地図、天気など）
- コメント・チャット機能
- 費用管理・精算機能
- 通知機能

### 5.2 技術的制約
- SQLiteを使用（小規模アプリケーション想定）
- 画像保存先: ローカルストレージ
- セッション管理: file driver

## 6. 成功基準

### 6.1 機能面
- [ ] すべてのコア機能が正常動作
- [ ] 画像アップロード・表示が正常動作
- [ ] PDF出力が期待通りのレイアウトで生成される
- [ ] レスポンシブデザインが各デバイスで機能

### 6.2 品質面
- [ ] PSR準拠のコード
- [ ] バリデーションエラーの適切な表示
- [ ] 画像ファイルの適切な処理
- [ ] 基本的なテストの実装

### 6.3 UX面
- [ ] 直感的な操作性
- [ ] 3クリック以内で主要機能にアクセス可能
- [ ] エラー時の適切なフィードバック
- [ ] モバイルでの快適な操作性

## 7. 参考情報

### 7.1 参考サイト
- 旅しお: https://tabisio.com/
  - シンプルで直感的なUI
  - PDF出力機能
  - URL共有機能
  - 会員登録不要のコンセプト

### 7.2 デザイン参考
- カード型レイアウト
- タイムライン表示
- パステルカラーの配色
- アイコンの効果的な使用

## 8. 今後の拡張性

### 8.1 Phase 2（将来実装候補）
- ユーザー認証機能
- お気に入り機能
- テンプレート機能
- SNS共有機能
- 地図表示（Google Maps連携）
- 天気情報表示
- 費用管理機能
- 複数言語対応

### 8.2 Phase 3（さらなる拡張）
- モバイルアプリ化（PWA）
- オフライン機能
- リアルタイム共同編集
- AIによる旅程提案
- 写真自動整理機能

---

**作成日**: 2025-11-06
**バージョン**: 1.0
**ステータス**: 承認待ち
